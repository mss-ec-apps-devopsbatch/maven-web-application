node
{
def mavenhome = tool name:"maven3.8.3"    
stage('checkout code')
{
git branch: 'development', credentialsId: 'fb8d72f7-be5e-4ca6-9b40-fb53feb557eb', url: 
'https://github.com/mss-ec-apps-devopsbatch/maven-web-application.git'
}
stage('build')
{
sh "${mavenhome}/bin/mvn clean package"
}
stage('Execute sonarqube report')
{
sh "${mavenhome}/bin/mvn clean sonar:sonar"    
}
stage('upload artifats into artifat repo')
{
 sh "${mavenhome}/bin/mvn clean deploy"      
}
stage('deploy into tomcat')
{
  sshagent(['00b8a176-c922-407d-b5fe-8e6f04f6ced4']) {
sh "scp -o StrictHostKeyChecking=no target/maven-web-application.war ec2-user@3.108.53.180:/opt/apache-tomcat-9.0.56/webapps/"
}  
}




}
